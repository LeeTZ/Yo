SOURCES = scanner.mll \
          parser.mly \
          sast.ml \
          ast.ml \
          parser.ml \
          scanner.ml \
          parser_test.ml \
          semantic.ml
     
OCAMLBUILD = ocamlbuild

all: 
	$(OCAMLBUILD) parser_test.native semantic.native
# For those machine doesn't have ocamlbuild, build the project with this makefile

OBJ=ast.cmo \
	scanner.cmo \
	parser.cmo \
	parser_test.cmo \
	type_reader.cmo
	
YO=parser_test

FLAGS:=-g

$(YO): $(OBJ)
	ocamlc -g -o parser_test parser.cmo scanner.cmo ast.cmo parser_test.cmo type_reader.cmo

.SUFFIXES: .ml .cmo .cmi .mll .mly .mli
.PRECIOUS: %.ml %.mli %.cmo

.ml.cmo:
	ocamlc -c $(FLAGS) $<

.mli.cmi:
	ocamlc -c $(FLAGS) $<
    
.mll.ml:
	ocamllex $<

.mly.ml:
	ocamlyacc -v $<

.mly.mli:
	ocamlyacc -v $<

clean:
	$(OCAMLBUILD) -clean



# Generated by ocamldep
ast.cmo:
ast.cmx:
parser.cmo: ast.cmo parser.cmi
parser.cmx: ast.cmx parser.cmi
parser.cmi: ast.cmo
scanner.cmo: parser.cmi
scanner.cmx: parser.cmx
parser_test.cmo: scanner.cmo parser.cmi ast.cmo
parser_test.cmx: scanner.cmx parser.cmx ast.cmx
type_reader.cmo: ast.cmo
type_reader.cmx: ast.cmx
