# For those machine doesn't have ocamlbuild, build the project with this makefile

OBJ=ast.cmo \
 	scanner.cmo \
	parser.cmo \
	sast.cmo \
	semantic.cmo \
	parser_test.cmo 	
YO=parser_test

FLAGS:=-g

$(YO): $(OBJ)
	ocamlc -g -o parser_test parser.cmo scanner.cmo ast.cmo parser_test.cmo \
    ocamlc -g -o semantic_test semantic.cmo ast.cmo sast.cmo

.SUFFIXES: .ml .cmo .cmi .mll .mly .mli
.PRECIOUS: %.ml %.mli %.cmo

.ml.cmo:
	ocamlc -c $(FLAGS) $<

.mli.cmi:
	ocamlc -c $(FLAGS) $<
    
.mll.ml:
	ocamllex $<

.mly.ml:
	ocamlyacc -v $<

.mly.mli:
	ocamlyacc -v $<

clean:
	rm -f *.cmi *.cmo parser.ml scanner.ml parser.mli 


# Generated by ocamldep
ast.cmo:
ast.cmx:
parser.cmo: ast.cmo parser.cmi
parser.cmx: ast.cmx parser.cmi
parser.cmi: ast.cmo
scanner.cmo: parser.cmi
scanner.cmx: parser.cmx
parser_test.cmo: scanner.cmo parser.cmi ast.cmo
parser_test.cmx: scanner.cmx parser.cmx ast.cmx
semantic.cmo: ast.cmo
semantic.cmx: ast.cmx

